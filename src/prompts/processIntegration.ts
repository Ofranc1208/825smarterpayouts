/**
 * Process Integration System for Enhanced Conversational AI
 *
 * This module provides detailed process information for the AI assistant,
 * making it knowledgeable about the complete 4-step early payout process,
 * timelines, requirements, and state variations.
 *
 * @module processIntegration
 * @author SmarterPayouts Team
 * @since 2025
 */

/**
 * Detailed process information for AI integration
 * Formatted for optimal GPT comprehension and natural conversation
 */
export const PROCESS_INTEGRATION_CONTENT = `
## ðŸ”„ SMARTERPAYOUTS - COMPLETE 4-STEP PROCESS

### Our Industry-Leading 4-Step Early Payout Process

**Total Timeline:** 15-50 days (industry-leading speed)
**Court Approval:** Required in all cases (30-45 days average)
**Funding Speed:** 2-5 business days after court approval
**Success Rate:** 98% approval rate (industry highest)

#### Step 1: Get Instant Quote (1-5 minutes)
**ðŸŽ¯ What Happens:**
- Use AI-powered Early Payout Calculator
- Enter payment amount, frequency, and timeline
- Get instant quote without personal information
- No signup, no phone calls, no commitment required

**ðŸ“‹ Requirements:**
- Payment amount (monthly/quarterly/annually)
- Payment frequency (monthly, quarterly, semi-annually, annually, lump sum)
- Start and end dates (or indicate if life-contingent)
- Your state of residence (for legal requirements)

**ðŸ’¡ Quote Accuracy:**
- Based on current market rates and industry standards
- Includes all fees and costs upfront
- No hidden charges or surprise deductions
- Valid for 30 days with no obligation

**ðŸ›¡ï¸ Privacy Protection:**
- No social security number required
- No bank account information needed
- No credit check performed
- Information encrypted and secure

#### Step 2: Review Transparent Terms (15-30 minutes)
**ðŸŽ¯ What Happens:**
- Dedicated specialist assigned to your case
- Review quote details and terms in plain English
- Discuss your specific situation and needs
- Answer all questions without pressure
- Compare options if multiple strategies available

**ðŸ“‹ What You'll Receive:**
- **Detailed Quote Breakdown:** How we calculated your offer
- **Payment Schedule:** When and how you'll receive funds
- **Fee Disclosure:** All costs clearly explained upfront
- **Timeline Estimate:** Expected processing time for your state
- **Next Steps:** Clear path forward if you choose to proceed

**ðŸ¤ Specialist Benefits:**
- One person handles your entire case
- Direct phone and email access
- No call center or multiple transfers
- Personalized attention throughout process
- Available during business hours (9AM-6PM EST)

**â“ Common Questions Addressed:**
- "How did you calculate this amount?"
- "What are all the fees included?"
- "How long will this take in my state?"
- "What documents will I need?"
- "Can I change my mind later?"

#### Step 3: Legal Process & Court Approval (30-45 days)
**ðŸŽ¯ What Happens:**
- Our legal team prepares all court documents
- Complete application package submitted to court
- Judge reviews case to ensure fairness
- You receive court date notification
- Brief court hearing (typically 15-30 minutes)

**ðŸ“‹ Court Requirements:**
- **Petition Filing:** Legal document explaining the sale
- **Disclosure Statement:** Full terms and conditions
- **Independent Advice:** Opportunity to consult advisors
- **Judge Questions:** Basic understanding confirmation
- **Fairness Review:** Judge ensures terms are reasonable

**â° State Variations:**
- **Fast States:** 30 days (FL, TX, CA, NY)
- **Average States:** 45 days (most states)
- **Slower States:** 60 days (IL, PA, NJ)
- **Complex Cases:** 60-90 days (multiple parties, large amounts)

**ðŸ¤” Judge Questions (Typical):**
- "Why are you selling your payments?"
- "Do you understand the terms of the transaction?"
- "Have you consulted with a financial advisor?"
- "What will you do with the lump sum payment?"
- "Are you under any pressure to make this decision?"

**ðŸ“‹ Document Preparation:**
- Settlement agreement and disclosure
- Court petition and supporting documents
- Notice to insurance company
- Affidavit of understanding
- State-specific requirements

**ðŸ“„ Required Documents for Application:**
- **Settlement Agreement:** Copy of your original structured settlement agreement that shows payment schedule and terms
- **Annuity Policy:** Documentation from the insurance company showing your annuity details and payment structure
- **Government-Issued ID:** Valid driver's license, passport, or state ID for identity verification
- **Proof of Address:** Recent utility bill, bank statement, or lease agreement (within 90 days)
- **Payment History:** Recent payment statements or bank records showing you've been receiving payments
- **Court Documents:** Any relevant court orders or legal documents related to your settlement (if available)
- **Financial Statements:** Optional but helpful - recent bank statements or financial documents showing current financial situation

**ðŸ“ What We Handle:**
- All court filing documents and petitions
- Disclosure statements and required notices
- Legal affidavits and sworn statements
- State-specific compliance documents
- Communication with court and insurance company
- Document preparation and filing fees

**â±ï¸ Document Collection Timeline:**
- Initial document request: Sent within 24 hours of quote acceptance
- Document submission: Typically 3-5 business days for you to gather and submit
- Document review: 1-2 business days for our team to verify completeness
- Court filing: Documents filed within 5-7 business days after approval

#### Step 4: Receive Funds (2-5 business days)
**ðŸŽ¯ What Happens:**
- Court approval received and confirmed
- Funds transferred to your chosen account
- Confirmation of receipt sent to you
- Post-transaction support available

**ðŸ’° Payment Options:**
- **Direct Deposit:** Fastest option (1-2 business days)
- **Wire Transfer:** Same-day processing available
- **Certified Check:** Mailed within 24 hours
- **Multiple Payments:** Split payments if preferred

**âœ… Post-Funding Support:**
- Confirmation letter with transaction details
- Tax information and guidance
- Customer satisfaction survey
- Future assistance available if needed
- Refer-a-friend program eligibility

### Process Variations by Payment Type

#### Guaranteed Payments Process
**Characteristics:**
- Fixed payments for specific time period
- Higher approval rates (98%+)
- Faster processing (15-45 days)
- More predictable valuations

**Timeline:**
- Quote: Instant (1-2 minutes)
- Review: 1-2 business days
- Court: 30-45 days
- Funding: 2-3 business days after approval

**Best For:**
- Debt consolidation
- Home purchase or improvement
- Business investment
- Education funding

#### Life-Contingent Payments Process
**Characteristics:**
- Payments continue for lifetime
- Requires health assessment
- Variable valuations based on life expectancy
- More complex court review

**Timeline:**
- Quote: Instant (1-2 minutes)
- Health Review: 1-3 business days
- Court: 45-60 days
- Funding: 2-3 business days after approval

**Health Assessment:**
- Medical questionnaire (5-10 minutes)
- No medical exam required
- Based on statistical life expectancy
- Completely confidential

**Best For:**
- Retirement planning
- Long-term care funding
- Estate planning
- Lifetime income needs

#### Partial Payment Sales Process
**Characteristics:**
- Sell portion of payments, keep the rest
- Maintain some future income security
- Flexible options available
- Court approval still required

**Options:**
- Sell specific number of years
- Sell percentage of each payment
- Sell specific payment amounts
- Keep lifetime payments intact

**Timeline:** Same as full sale process
**Approval Rate:** Similar to full payments
**Flexibility:** Maximum customization available

### State-by-State Process Variations

**Fast Processing States (30-45 days):**
- Florida, Texas, California, New York
- Streamlined court processes
- Experienced judges familiar with transfers
- Predictable timelines

**Average Processing States (45-60 days):**
- Most states fall in this category
- Standard court procedures
- Typical judge review process
- Reliable but not expedited

**Complex Processing States (60-90 days):**
- Illinois, Pennsylvania, New Jersey
- Additional court requirements
- More thorough judge review
- Multiple hearing possibilities

### Emergency Processing Options

**Expedited Court Approval:**
- Available in most states for urgent situations
- Requires documentation of emergency need
- Court prioritizes urgent cases
- Same-day filing possible

**Emergency Criteria:**
- Medical emergencies requiring immediate treatment
- Imminent foreclosure or eviction
- Business emergencies requiring immediate capital
- Court deadlines or legal requirements

**Fast-Track Benefits:**
- Priority court scheduling
- Expedited document review
- Same-day specialist response
- Emergency hotline access

### Quality Assurance Throughout Process

**Transparency Guarantee:**
- All fees disclosed upfront
- No hidden costs or surprise charges
- Clear timeline provided and updated regularly
- Real-time case status tracking

**Communication Standards:**
- Weekly updates during court process
- Immediate response to all inquiries
- 24/7 access to case status online
- Direct specialist contact information

**Document Security:**
- Bank-level encryption for all documents
- Secure file sharing and storage
- No physical document mailing required
- Digital signature capabilities

### Process Success Metrics

**Overall Success Rate:** 98%
**Average Processing Time:** 15-50 days
**Court Approval Rate:** 98%
**Customer Satisfaction:** 4.9/5 stars
**On-Time Funding:** 99.2%

**By Payment Type:**
- Guaranteed Payments: 99% approval rate
- Life-Contingent: 97% approval rate
- Partial Sales: 98% approval rate

**By State:**
- Fast States: 99% approval, 30-45 days
- Average States: 98% approval, 45-60 days
- Complex States: 96% approval, 60-90 days

### Common Process Questions & Answers

**"How do I know this is legitimate?"**
- Works with licensed brokers in all 50 states since 2017
- Court approval required for every case
- A+ Better Business Bureau rating
- 4.9/5 customer rating across platforms

**"What if I change my mind?"**
- You can cancel anytime before court approval
- No fees or penalties for cancellation
- Court date can be postponed if needed
- No obligation until you sign final agreement

**"How do I track my progress?"**
- 24/7 online portal access
- Real-time status updates
- Direct specialist contact
- Email and SMS notifications

**"What happens after funding?"**
- Funds deposited to your chosen account
- Confirmation letter with all details
- Tax information provided
- Future assistance available if needed

This comprehensive process ensures every customer understands exactly what to expect and receives personalized support throughout their journey.
`;

/**
 * Process keyword mapping for contextual awareness
 * Helps the AI recognize when to reference specific process information
 */
export const PROCESS_KEYWORDS = {
  steps: ['step', 'process', 'how', 'procedure', 'timeline', 'stages', 'phases'],
  timing: ['fast', 'quick', 'time', 'how long', 'when', 'speed', 'timeline', 'duration'],
  legal: ['court', 'judge', 'approval', 'legal', 'law', 'attorney', 'lawyer', 'filing'],
  documents: ['document', 'paperwork', 'forms', 'application', 'requirements', 'upload'],
  state: ['state', 'location', 'where', 'laws', 'requirements', 'by state', 'local'],
  emergency: ['urgent', 'emergency', 'asap', 'rush', 'immediate', 'fast track', 'expedited'],
  types: ['guaranteed', 'life contingent', 'lcp', 'annuity', 'payment type', 'partial'],
  quality: ['guarantee', 'success', 'approval', 'satisfaction', 'metrics', 'rate']
};

/**
 * Detects Process-related keywords in user message
 * @param message User's message text
 * @returns Array of detected process categories
 */
export function detectProcessCategories(message: string): string[] {
  const lowerMessage = message.toLowerCase();
  const categories: string[] = [];

  for (const [category, keywords] of Object.entries(PROCESS_KEYWORDS)) {
    if (keywords.some(keyword => lowerMessage.includes(keyword))) {
      categories.push(category);
    }
  }

  return categories;
}

/**
 * Generates Process-aware context hint for the AI
 * @param message User's message text
 * @returns Context hint string
 */
export function getProcessContextHint(message: string): string {
  const categories = detectProcessCategories(message);

  if (categories.length === 0) {
    return '';
  }

  return `
ðŸ’¡ PROCESS CONTEXT: This question relates to ${categories.join(', ')}. Reference the Process Information section above for detailed step-by-step guidance, timelines, legal requirements, and state variations.`;
}
